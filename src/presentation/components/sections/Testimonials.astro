---
import { testimonials } from '../../../utils/constants/testimonials';
import SectionTitle from '../ui/SectionTitle.astro';
import Card from '../ui/Card.astro';

// Duplicate testimonials for seamless loop
const duplicatedTestimonials = [...testimonials, ...testimonials];
---

<!-- Testimonials Section -->
<section class="py-20 bg-white overflow-hidden">
    <div class="max-w-7xl mx-auto px-6">
        <SectionTitle 
            badge="Testimonials"
            title="What Our Users Are Saying"
            description="In a single, easy-to-use dashboard, people from a variety of sectors rely on Clario to handle finances, lower stress levels, and make better decisions."
        />
        

        <!-- Testimonials Carousel -->
        <div class="space-y-6">
            <!-- First Row - Moving Left -->
            <div class="testimonial-row overflow-hidden">
                <div class="flex space-x-6 animate-scroll-left">
                    {duplicatedTestimonials.map((testimonial, index) => (
                            <div class="flex-shrink-0 w-80 bg-white border border-gray-100 rounded-2xl p-6 shadow-sm hover:shadow-md transition-shadow duration-300 relative overflow-hidden">
                                <!-- Hero background image -->
                                <div class="absolute inset-0 bg-cover bg-center opacity-40" style="background-image: url('/fondocard.svg')"></div>
                                <div class="absolute top-4 right-4 w-16 h-16 bg-cover bg-center opacity-50" style="background-image: url('/fondocard.svg')"></div>
                                <div class="relative z-10">
                                    <p class="text-gray-700 mb-6 leading-relaxed">
                                        "{testimonial.quote}"
                                    </p>
                                    <!-- Added decorative line separator -->
                                    <div class="w-full h-px bg-gradient-to-r from-gray-200 via-gray-300 to-gray-200 mb-6"></div>
                                    <div class="flex items-center">
                                        <img
                                                src={testimonial.avatar || "fondocard.svg"}
                                                alt={testimonial.name}
                                                class="w-12 h-12 rounded-full mr-4 object-cover"
                                        />
                                        <div>
                                            <div class="font-semibold text-gray-900">{testimonial.name}</div>
                                            <div class="text-gray-600 text-sm">{testimonial.role}</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                    ))}
                </div>
            </div>

            <!-- Second Row - Moving Right -->
            <div class="testimonial-row overflow-hidden">
                <div class="flex space-x-6 animate-scroll-right">
                    {duplicatedTestimonials.map((testimonial, index) => (
                            <div class="flex-shrink-0 w-80 bg-white border border-gray-100 rounded-2xl p-6 shadow-sm hover:shadow-md transition-shadow duration-300 relative overflow-hidden">
                                <!-- Hero background image -->
                                <div class="absolute inset-0 bg-cover bg-center opacity-40" style="background-image: url('/fondocard.svg')"></div>
                                <div class="absolute top-4 right-4 w-16 h-16 bg-cover bg-center opacity-50" style="background-image: url('/fondocard.svg')"></div>
                                <div class="relative z-10">
                                    <p class="text-gray-700 mb-6 leading-relaxed">
                                        "{testimonial.quote}"
                                    </p>
                                    <!-- Added decorative line separator -->
                                    <div class="w-full h-px bg-gradient-to-r from-gray-200 via-gray-300 to-gray-200 mb-6"></div>
                                    <div class="flex items-center">
                                        <img
                                                src={testimonial.avatar || "/placeholder.svg"}
                                                alt={testimonial.name}
                                                class="w-12 h-12 rounded-full mr-4 object-cover"
                                        />
                                        <div>
                                            <div class="font-semibold text-gray-900">{testimonial.name}</div>
                                            <div class="text-gray-600 text-sm">{testimonial.role}</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                    ))}
                </div>
            </div>
        </div>
    </div>
</section>

<style>
  @keyframes scroll-left {
    0% {
      transform: translateX(0);
    }
    100% {
      transform: translateX(-50%);
    }
  }

  @keyframes scroll-right {
    0% {
      transform: translateX(-50%);
    }
    100% {
      transform: translateX(0);
    }
  }

  .animate-scroll-left {
    animation: scroll-left 30s linear infinite;
  }

  .animate-scroll-right {
    animation: scroll-right 30s linear infinite;
  }

  .testimonial-row {
    mask-image: linear-gradient(to right, transparent, black 10%, black 90%, transparent);
    -webkit-mask-image: linear-gradient(to right, transparent, black 10%, black 90%, transparent);
  }
</style>
